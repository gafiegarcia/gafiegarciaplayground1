<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ritual24 — Monthly Financial Dashboard</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <style>
    :root{
      --bg:#0b1020; --panel:#0f1a36; --card:#121a33; --muted:#93a4c8; --fg:#eaf0ff;
      --sky:#0ea5e9; --amber:#f59e0b; --violet:#8b5cf6; --slate:#64748b; --rose:#ef4444;
      --ring:rgba(14,165,233,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      background:linear-gradient(180deg,#0b1020 0%,#0c1230 100%); color:var(--fg);
    }
    .wrap{max-width:1100px; margin:24px auto; padding:0 16px}
    h1{font-weight:650; letter-spacing:.2px; margin:0 0 6px}
    .muted{color:var(--muted); font-size:13px}
    .panel{
      margin-top:12px;
      background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.07); border-radius:16px; padding:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.28);
    }
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:12px}
    .card{
      background:var(--card); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:14px;
      transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease; position:relative;
    }
    .card:hover{transform:translateY(-2px); border-color:var(--ring); box-shadow:0 10px 24px rgba(0,0,0,.25)}
    .title{font-weight:600; margin-bottom:2px}
    .period{font-size:12px; color:var(--muted); margin-bottom:10px}
    .badge{position:absolute; top:10px; right:10px; font-size:11px; padding:3px 8px; border-radius:999px; font-weight:600}
    .b-danger{background:rgba(239,68,68,.12); color:#fecaca; border:1px solid rgba(239,68,68,.35)}
    .b-ok{background:rgba(14,165,233,.12); color:#bae6fd; border:1px solid rgba(14,165,233,.35)}
    .b-soon{background:rgba(148,163,184,.12); color:#cbd5e1; border:1px solid rgba(148,163,184,.35)}
    .stats{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:8px; margin:10px 0 8px}
    .stat{background:#0f172a; border:1px solid rgba(255,255,255,.06); border-radius:10px; padding:8px}
    .sv{font-weight:650}
    .sl{font-size:11px; color:var(--muted)}
    .btn{
      display:inline-block; margin-top:6px; padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.04); color:var(--fg); text-decoration:none; font-weight:600; font-size:13px;
    }
    .btn:hover{outline:2px solid var(--ring)}
    .legend{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; font-size:12px; color:var(--muted)}
    .dot{width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px}
    .footer{margin-top:14px; font-size:12px; color:var(--muted); display:flex; justify-content:space-between; gap:8px; flex-wrap:wrap}
    @media(max-width:720px){ .stats{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Ritual24 — Financial Dashboard</h1>
    <div class="muted">Home links to each month’s interactive bar chart. Same style as the new ECharts page.</div>

    <div class="panel">
      <div id="cards" class="grid"></div>
      <div class="legend">
        <span><span class="dot" style="background:var(--sky)"></span>Essential</span>
        <span><span class="dot" style="background:var(--amber)"></span>Strategic</span>
        <span><span class="dot" style="background:var(--violet)"></span>Lifestyle</span>
        <span><span class="dot" style="background:var(--slate)"></span>Buffer</span>
        <span><span class="dot" style="background:var(--rose)"></span>Overspend (indicator)</span>
      </div>
      <div class="footer">
        <div>Tip: add more months by editing the <code>CHARTS</code> array below.</div>
        <div id="updated">Last updated —</div>
      </div>
    </div>
  </div>

  <script>
    // ====== Data: add or edit your months here ======
    // url is relative to repo root (e.g., charts/aug-sep-2025.html)
    const CHARTS = [
      {
        title: "August → September 2025",
        period: "Aug 24 → Sept 24, 2025",
        url: "charts/aug-sep-2025.html",
        income: 8200000,
        overspend: 2742421,
        foodPct: 53.3,
        savingsPct: 0
      },
      // Optional alternate view
      {
        title: "Aug → Sept 2025 (Alt)",
        period: "Same period — alternate chart",
        url: "charts/cgpt-aug-sep-2025.html",
        status: "ok" // ok | soon | danger
      },
      // Future placeholders you can quickly rename
      { title: "September → October 2025", period: "Sep 24 → Oct 24, 2025", url: "#", status: "soon" },
      { title: "October → November 2025", period: "Oct 24 → Nov 24, 2025", url: "#", status: "soon" }
    ];

    function fmtRp(n){ return "Rp " + Math.round(n).toLocaleString("id-ID"); }
    function pct(n,d=1){ return (Math.round(n * (10**d)) / (10**d)).toFixed(d) + "%"; }

    function makeCard(item){
      const overs = typeof item.overspend === "number" ? item.overspend : 0;
      const status = item.status || (overs > 0 ? "danger" : "ok");
      const card = document.createElement("div");
      card.className = "card";

      const badge = document.createElement("div");
      badge.className = "badge " + (status === "danger" ? "b-danger" : status === "soon" ? "b-soon" : "b-ok");
      badge.textContent = status === "danger" ? "CRITICAL" : status === "soon" ? "UPCOMING" : "READY";
      card.appendChild(badge);

      const t = document.createElement("div");
      t.className = "title";
      t.textContent = item.title;
      card.appendChild(t);

      const p = document.createElement("div");
      p.className = "period";
      p.textContent = item.period || "";
      card.appendChild(p);

      if (typeof item.income === "number"){
        const stats = document.createElement("div"); stats.className = "stats";
        stats.innerHTML = `
          <div class="stat"><div class="sv">${fmtRp(item.income)}</div><div class="sl">Income</div></div>
          <div class="stat"><div class="sv">${overs>0?("-" + pct((overs/item.income)*100)):"0%"}</div><div class="sl">Balance</div></div>
          <div class="stat"><div class="sv">${typeof item.foodPct==="number"?pct(item.foodPct):"—"}</div><div class="sl">Food</div></div>
          <div class="stat"><div class="sv">${typeof item.savingsPct==="number"?pct(item.savingsPct):"—"}</div><div class="sl">Savings</div></div>
        `;
        card.appendChild(stats);
      }

      const a = document.createElement("a");
      a.href = item.url || "#"; a.target = "_self"; a.rel = "noopener";
      a.className = "btn"; a.textContent = item.url && item.url !== "#" ? "Open Chart" : "Coming Soon";
      if (!item.url || item.url === "#"){ a.style.opacity = .6; a.style.pointerEvents = "none"; }
      card.appendChild(a);

      return card;
    }

    const mount = document.getElementById("cards");
    CHARTS.forEach(c => mount.appendChild(makeCard(c)));

    document.getElementById("updated").textContent = "Last updated — " + new Date().toLocaleDateString("en-GB", { day:"2-digit", month:"short", year:"numeric" });
  </script>
</body>
</html>
